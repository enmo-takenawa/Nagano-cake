<%#注文履歴詳細ページ%>
<div class="container">
    <div class="row">
        <h4 class="red-order bg-light m-4">注文履歴詳細</h4>
    </div>

    <div class="row">
    <%#注文情報////////////////////////////////////////////////////////////////////////////////////%>
        <div class="col-8 mt-4">
            <h5>注文情報</h5>
            <table class="table table-bordered">
                <tr>
                    <th class="bg-light text-dark">注文日</th>
                    <td class="text-dark"><%= @order.created_at.strftime("%Y/%m/%d") %></td>
                </tr>
                <tr>
                    <th class="bg-light text-dark">配送先</th>
                    <td class="text-dark">
                         <%= "〒" + @order.shipping_postal_code %></br>
                        <%= @order.shipping_address %></br>
                        <%= @order.shipping_name %>
                    </td>
                </tr>
                <tr>
                    <th class="bg-light text-dark">支払い方法</th>
                    <td class="text-dark"><%= @order.payment_method %></td>
                </tr>
                <tr>
                    <th class="bg-light text-dark">ステータス</th>
                    <td class="text-dark"><%= @order.order_status %></td>
                </tr>
            </table>
        </div>

    <%#請求情報////////////////////////////////////////////////////////////////////////////////////%>
        <div class="col-4  mt-4">
            <h5>請求情報</h5>
            <table class="table table-bordered">
                <tr class="border">
                <th class="bg-light text-dark">商品合計</th>
                <td class="text-dark"><%= @order.total_price.to_s(:delimited) %></td>
            </tr>

            <tr class="border">
                <th class="bg-light text-dark">配送料</th>
                <td class="text-dark"><%= @order.shipping_fee.to_s(:delimited) %></td>
            </tr>

            <tr class="border">
                <th class="bg-light text-dark">ご請求額</th>
                <td class="text-dark"><%= (@order.total_price + @order.shipping_fee).to_s(:delimited) %></td>
            </tr>
            </table>
        </div>
    </div>


    <%#注文内容////////////////////////////////////////////////////////////////////////////////////%>
    <div class="row  mt-4">
        <h5>注文内容</h5>
        <table class = "table table-bordered">
            <thead>
                <tr class = "border">
                    <th class="bg-light text-dark">商品</th>
                    <th class="bg-light text-dark">単価（税込）</th>
                    <th class="bg-light text-dark">個数</th>
                    <th class="bg-light text-dark">小計</th>
                </tr>
            </thead>
            <% @order.ordered_goods.each do |ordered_good| %>
            <tbody>
                <tr class = "border">
                    <% price = add_tax_price(ordered_good.good.price) %>
                    <td class="text-dark"><%= ordered_good.good.name %></td>
                    <td class="text-dark"><%= price.to_s(:delimited) %></td>
                    <td class="text-dark"><%= ordered_good.quantity %></td>
                    <td class="text-dark"><%= (price * ordered_good.quantity).to_s(:delimited) %></td>
                </tr>
            </tbody>
            <% end %>
        </table>
    </div>

    <%= link_to "注文履歴一覧へ戻る", orders_path %>

</div>
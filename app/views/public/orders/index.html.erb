<%#注文履歴詳細ページ%>

<h1>注文履歴一覧</h1>

<div class="row">
        <table class="border border-dark">
            <thead>
            <td>注文日</td>
            <td>配送先</td>
            <td>注文商品</td>
            <td>支払金額</td>
            <td>ステータス</td>
            <td>注文詳細</td>
            </thead>
            
            <%#ここから履歴の数字とかを入れるための記述%>
            <tbody>
                <% @orders.each do |order| %>
                <tr class="border border-dark">
                    <%#注文日%>
                    <td class="align-middle">
                        <%= order.created_at.strftime("%Y-%m-%d %H:%M") %>
                    </td>
                    
                    <% if order.address = ShippingAddress.find(order.address) %>
                    <%#配送先%>
                    <td class="align-middle">
                        <%= "〒" + ship_address.post_code + "  " + ship_address.address + "  " + ship_address.last_name + ship_address.first_name %>
                    </td>
                    
                    <% else %>
                    <td class="align-middle">
                        <% order.order_details.each do |f| %>
                        <%= f.item_name %>
                        <% end %>
                    </td>
                    
                    <td class="align-middle"><%= order.total_price %></td>
                    
                    <tb class="align-middle"><%= order.order_status %></tb>
                    
                    <td class="align-middle"><%=link_to "表示する",order_path(order), class: "btn btn-primary" %></td>
                    
                </tr>
                <% end %>
            </tbody>
        </table>
    </div>